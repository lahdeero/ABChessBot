<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Nappula.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">ABChessbot</a> &gt; <a href="index.source.html" class="el_package">shakkibeli.nappula</a> &gt; <span class="el_source">Nappula.java</span></div><h1>Nappula.java</h1><pre class="source lang-java linenums">package shakkibeli.nappula;

import java.util.Objects;
import java.util.logging.Level;
import java.util.logging.Logger;
import static shakkibeli.nappula.Arvo.*;
import static shakkibeli.nappula.Vari.*;

public class Nappula {

    private int x;
    private int y;
    private int edellinenX;
    private int edellinenY;
    private int testiEdellinenX;
    private int testiEdellinenY;
    private Arvo arvo;
    private Vari vari;
    private int variKoodi;
    private boolean valittu;
    private boolean aloitusKaytetty;
    private boolean syoty;
    private boolean korotettu;
    private Muuntaja muuntaja;

    /**
     * Luokan konstruktori.
     *
     * @param x Nappulan sijainti x-akselilla.
     * @param y Nappulan sijainti y-akselilla.
     * @param arvo Nappulan arvo. Esim. HEVONEN.
     * @param vari Nappulan vari. Esim VALKOINEN.
     */
<span class="nc" id="L34">    public Nappula(int x, int y, Arvo arvo, Vari vari) {</span>
<span class="nc bnc" id="L35" title="All 8 branches missed.">        if (x &gt;= 0 &amp;&amp; x &lt; 8 &amp;&amp; y &gt;= 0 &amp;&amp; y &lt; 8) {</span>
<span class="nc" id="L36">            this.x = x;</span>
<span class="nc" id="L37">            this.y = y;</span>
<span class="nc" id="L38">            this.edellinenX = x;</span>
<span class="nc" id="L39">            this.edellinenY = y;</span>
<span class="nc" id="L40">            this.arvo = arvo;</span>
<span class="nc" id="L41">            this.vari = vari;</span>
        }
<span class="nc" id="L43">        this.korotettu = false;</span>
<span class="nc" id="L44">        this.aloitusKaytetty = false;</span>
<span class="nc" id="L45">        this.syoty = false;</span>
<span class="nc" id="L46">        this.muuntaja = new Muuntaja();</span>
<span class="nc" id="L47">    }</span>

    /**
     * Muuntaja muuntaa muotoon: Qh6
     * @return 
     */
    @Override
    public String toString() {
<span class="nc" id="L55">        return muuntaja.muunna(x,y,this);</span>
    }

    /**
     * LÃ¤hinnÃ¤ (omassa) testauksessa kÃ¤ytetty metodi.
     *
     * @return Nappulan sijainnin, arvon ja vÃ¤rin merkkijonona.
     */
    public String info() {
<span class="nc" id="L64">        return &quot;x: &quot; + this.x + &quot; y: &quot; + this.y + &quot; Arvo: &quot; + this.arvo</span>
                + &quot; VÃ¤ri: &quot; + this.vari;
    }

    /**
     * KÃ¤yttÃ¶liittymÃ¤n apumetodi, tÃ¤mÃ¤n avulla piirretÃ¤Ã¤n punainen neliÃ¶ valitun
     * nappulan ympÃ¤rille.
     *
     * @param valittu HiirellÃ¤ klikattu nappula.
     */
    public void valitse(boolean valittu) {
<span class="nc" id="L75">        this.valittu = valittu;</span>
<span class="nc" id="L76">    }</span>

    /**
     * KÃ¤yttÃ¶liittymÃ¤n apumetodi, tarkistetaan onko kyseinen nappula
     * valittu(viimeksi kosketettu vuorossa oleva).
     *
     * @return true jos nappula on valittu, muuten false.
     */
    public boolean onkoValittu() {
<span class="nc" id="L85">        return this.valittu;</span>
    }

    /**
     * ABCB stuff
     *
     * @return WHITE: P,R,N,B,Q,K, BLACK: p,r,n,b,q,k
     */
    public char getCharacter() {
<span class="nc bnc" id="L94" title="All 2 branches missed.">        if (this.vari == VALKOINEN) {</span>
<span class="nc bnc" id="L95" title="All 7 branches missed.">            switch (arvo) {</span>
                case SOTILAS:
<span class="nc" id="L97">                    return 'P';</span>
                case TORNI:
<span class="nc" id="L99">                    return 'R';</span>
                case HEVONEN:
<span class="nc" id="L101">                    return 'N';</span>
                case LAHETTI:
<span class="nc" id="L103">                    return 'B';</span>
                case KUNINGATAR:
<span class="nc" id="L105">                    return 'Q';</span>
                case KUNINGAS:
<span class="nc" id="L107">                    return 'K';</span>
                default:
<span class="nc" id="L109">                    Logger.getLogger(Nappula.class.getName()).log(Level.SEVERE, null, &quot;Valkoisen nappulan merkkiÃ¤ ei saatu&quot;);</span>
            }
        } else {
<span class="nc bnc" id="L112" title="All 7 branches missed.">            switch (arvo) {</span>
                case SOTILAS:
<span class="nc" id="L114">                    return 'p';</span>
                case TORNI:
<span class="nc" id="L116">                    return 'r';</span>
                case HEVONEN:
<span class="nc" id="L118">                    return 'n';</span>
                case LAHETTI:
<span class="nc" id="L120">                    return 'b';</span>
                case KUNINGATAR:
<span class="nc" id="L122">                    return 'q';</span>
                case KUNINGAS:
<span class="nc" id="L124">                    return 'k';</span>
                default:
<span class="nc" id="L126">                    Logger.getLogger(Nappula.class.getName()).log(Level.SEVERE, null, &quot;Mustan nappulan merkkiÃ¤ ei saatu&quot;);</span>
            }
        }
<span class="nc" id="L129">        Logger.getLogger(Nappula.class.getName()).log(Level.SEVERE, null, &quot;Nappulan merkkiÃ¤ ei saatu&quot;);</span>
<span class="nc" id="L130">        return '.';</span>
    }

    /**
     * ABCB stuff
     *
     * @return WHITE: P,R,N,B,Q,K, BLACK: p,r,n,b,q,k
     */
    public int getIntegerValue() {
<span class="nc bnc" id="L139" title="All 2 branches missed.">        if (this.vari == VALKOINEN) {</span>
<span class="nc bnc" id="L140" title="All 7 branches missed.">            switch (arvo) {</span>
                case SOTILAS:
<span class="nc" id="L142">                    return 15;</span>
                case TORNI:
<span class="nc" id="L144">                    return 14;</span>
                case HEVONEN:
<span class="nc" id="L146">                    return 13;</span>
                case LAHETTI:
<span class="nc" id="L148">                    return 12;</span>
                case KUNINGATAR:
<span class="nc" id="L150">                    return 11;</span>
                case KUNINGAS:
<span class="nc" id="L152">                    return 10;</span>
                default:
<span class="nc" id="L154">                    Logger.getLogger(Nappula.class.getName()).log(Level.SEVERE, null, &quot;Valkoisen nappulan numeroarvoa ei saatu&quot;);</span>
            }
        } else {
<span class="nc bnc" id="L157" title="All 7 branches missed.">            switch (arvo) {</span>
                case SOTILAS:
<span class="nc" id="L159">                    return 25;</span>
                case TORNI:
<span class="nc" id="L161">                    return 24;</span>
                case HEVONEN:
<span class="nc" id="L163">                    return 23;</span>
                case LAHETTI:
<span class="nc" id="L165">                    return 22;</span>
                case KUNINGATAR:
<span class="nc" id="L167">                    return 21;</span>
                case KUNINGAS:
<span class="nc" id="L169">                    return 20;</span>
                default:
<span class="nc" id="L171">                    Logger.getLogger(Nappula.class.getName()).log(Level.SEVERE, null, &quot;Mustan nappulan numeroarvoa ei saatu&quot;);</span>
            }
        }
<span class="nc" id="L174">        Logger.getLogger(Nappula.class.getName()).log(Level.SEVERE, null, &quot;Nappulan numeroarvoa ei saatu&quot;);</span>
<span class="nc" id="L175">        return 0;</span>
    }

    /**
     * Liikuttaa nappulaa, eli antaa sille uudet x(nx)- ja y(ny)-koordinaatit.
     *
     * @param nx Uusi X.
     * @param ny Uusi Y.
     */
    public void liiku(int nx, int ny) {
<span class="nc bnc" id="L185" title="All 8 branches missed.">        if (nx &gt;= 0 &amp;&amp; nx &lt; 8 &amp;&amp; ny &gt;= 0 &amp;&amp; ny &lt; 8) {</span>
<span class="nc" id="L186">            this.edellinenX = x;</span>
<span class="nc" id="L187">            this.edellinenY = y;</span>
<span class="nc" id="L188">            this.x = nx;</span>
<span class="nc" id="L189">            this.y = ny;</span>
<span class="nc" id="L190">            this.aloitusKaytetty = true;</span>
        }
<span class="nc bnc" id="L192" title="All 8 branches missed.">        if (this.arvo == SOTILAS &amp;&amp; this.y == 7 || this.arvo == SOTILAS &amp;&amp; this.y == 0) {</span>
<span class="nc" id="L193">            korotettu = true;</span>
        } else {
<span class="nc" id="L195">            korotettu = false;</span>
        }
<span class="nc" id="L197">    }</span>

    /**
     * Liikuttaa nappulan takaisin edelliseen sijaintiinsa.
     */
    public void liikuTakaisin() {
<span class="nc" id="L203">        this.x = edellinenX;</span>
<span class="nc" id="L204">        this.y = edellinenY;</span>
<span class="nc" id="L205">    }</span>

    /**
     * Logiikan kÃ¤yttÃ¤mÃ¤ apumetodi, esim. kun tarkistetaan voiko uhkauksen
     * torjua.
     *
     * @param nx Testiliikkeen mÃ¤Ã¤rÃ¤npÃ¤Ã¤ x-akselilla.
     * @param ny Testiliikkeen mÃ¤Ã¤rÃ¤npÃ¤Ã¤ y-akselilla.
     */
    public void testiLiiku(int nx, int ny) {
<span class="nc bnc" id="L215" title="All 8 branches missed.">        if (nx &gt;= 0 &amp;&amp; nx &lt; 8 &amp;&amp; ny &gt;= 0 &amp;&amp; ny &lt; 8) {</span>
<span class="nc" id="L216">            this.testiEdellinenX = x;</span>
<span class="nc" id="L217">            this.testiEdellinenY = y;</span>
<span class="nc" id="L218">            this.x = nx;</span>
<span class="nc" id="L219">            this.y = ny;</span>
        }
<span class="nc" id="L221">    }</span>

    /**
     * Kumoaa testiLiiku(int nx, int ny) -metodin toimet.
     */
    public void testiLiikuTakaisin() {
<span class="nc" id="L227">        this.x = testiEdellinenX;</span>
<span class="nc" id="L228">        this.y = testiEdellinenY;</span>
<span class="nc" id="L229">    }</span>

    public boolean getAloitusKaytetty() {
<span class="nc" id="L232">        return this.aloitusKaytetty;</span>
    }

    /**
     * Asettaa nappulalle uuden arvon, kÃ¤ytetÃ¤Ã¤n sotilaan saapuessa
     * (vastustajan) pÃ¤Ã¤tyyn.
     *
     * @param uusi Uusi arvo.
     */
    public void setArvo(Arvo uusi) {
<span class="nc" id="L242">        this.korotettu = true;</span>
<span class="nc" id="L243">        this.arvo = uusi;</span>
<span class="nc" id="L244">    }</span>

    public void setVariKoodi(int koodi) {
<span class="nc" id="L247">        this.variKoodi = koodi;</span>
<span class="nc" id="L248">    }</span>

    /**
     * Saattaa olla turha, kÃ¤yettty Vari enumin korvaajana jossain(hyvin
     * harvoissa) tilanteissa joskus.
     *
     * @return 1 jos nappula on valkoinen, mustalla nappulalla 2.
     */
    public int getVariKoodi() {
<span class="nc bnc" id="L257" title="All 2 branches missed.">        if (this.variKoodi == 0) {</span>
<span class="nc bnc" id="L258" title="All 2 branches missed.">            if (this.vari == VALKOINEN) {</span>
<span class="nc" id="L259">                return 1;</span>
            }
<span class="nc" id="L261">            return 2;</span>
        }
<span class="nc" id="L263">        return this.variKoodi;</span>
    }

    public Arvo getArvo() {
<span class="nc" id="L267">        return this.arvo;</span>
    }

    public int getX() {
<span class="nc" id="L271">        return this.x;</span>
    }

    public int getY() {
<span class="nc" id="L275">        return this.y;</span>
    }

    public int getEdellinenX() {
<span class="nc" id="L279">        return this.edellinenX;</span>
    }

    public int getEdellinenY() {
<span class="nc" id="L283">        return this.edellinenY;</span>
    }

    public Vari getVari() {
<span class="nc" id="L287">        return this.vari;</span>
    }

    public boolean getKorotettu() {
<span class="nc" id="L291">        return this.korotettu;</span>
    }

    /**
     * TekoÃ¤ly sai kÃ¤siinsÃ¤ joskus laudalta jo poistettuja nappuloita, tÃ¤llÃ¤
     * yritetty korjata tilanne(saattaa olla jo turha).
     */
    public void setSyodyksi() {
<span class="nc" id="L299">        this.syoty = true;</span>
<span class="nc" id="L300">    }</span>

    /**
     * TekoÃ¤ly sai kÃ¤siinsÃ¤ joskus laudalta jo poistettuja nappuloita, tÃ¤llÃ¤
     * yritetty korjata tilanne(saattaa olla jo turha).
     *
     * @return Onko nappula syÃ¶ty eli poistettu laudalta.
     */
    public boolean onkoSyoty() {
<span class="nc" id="L309">        return this.syoty;</span>
    }

    public int getArvoKoodi() {
<span class="nc bnc" id="L313" title="All 2 branches missed.">        if (this.vari == VALKOINEN) {</span>
<span class="nc bnc" id="L314" title="All 2 branches missed.">            if (this.arvo == KUNINGAS) {</span>
<span class="nc" id="L315">                return 1;</span>
<span class="nc bnc" id="L316" title="All 2 branches missed.">            } else if (this.arvo == KUNINGATAR) {</span>
<span class="nc" id="L317">                return 2;</span>
<span class="nc bnc" id="L318" title="All 2 branches missed.">            } else if (this.arvo == TORNI) {</span>
<span class="nc" id="L319">                return 3;</span>
<span class="nc bnc" id="L320" title="All 2 branches missed.">            } else if (this.arvo == HEVONEN) {</span>
<span class="nc" id="L321">                return 5;</span>
<span class="nc bnc" id="L322" title="All 2 branches missed.">            } else if (this.arvo == LAHETTI) {</span>
<span class="nc" id="L323">                return 4;</span>
<span class="nc bnc" id="L324" title="All 2 branches missed.">            } else if (this.arvo == SOTILAS) {</span>
<span class="nc" id="L325">                return 6;</span>
            }
        } else {
<span class="nc bnc" id="L328" title="All 2 branches missed.">            if (this.arvo == KUNINGAS) {</span>
<span class="nc" id="L329">                return 7;</span>
<span class="nc bnc" id="L330" title="All 2 branches missed.">            } else if (this.arvo == KUNINGATAR) {</span>
<span class="nc" id="L331">                return 8;</span>
<span class="nc bnc" id="L332" title="All 2 branches missed.">            } else if (this.arvo == TORNI) {</span>
<span class="nc" id="L333">                return 9;</span>
<span class="nc bnc" id="L334" title="All 2 branches missed.">            } else if (this.arvo == HEVONEN) {</span>
<span class="nc" id="L335">                return 11;</span>
<span class="nc bnc" id="L336" title="All 2 branches missed.">            } else if (this.arvo == LAHETTI) {</span>
<span class="nc" id="L337">                return 10;</span>
<span class="nc bnc" id="L338" title="All 2 branches missed.">            } else if (this.arvo == SOTILAS) {</span>
<span class="nc" id="L339">                return 12;</span>
            }
        }

<span class="nc" id="L343">        Logger.getLogger(Nappula.class.getName()).log(Level.SEVERE, null, &quot;Sotilaan arvokoodia ei saatu&quot;);</span>

<span class="nc" id="L345">        return 0;</span>
    }

    @Override
    public int hashCode() {
<span class="nc" id="L350">        int hash = 5;</span>
<span class="nc" id="L351">        hash = 11 * hash + this.x;</span>
<span class="nc" id="L352">        hash = 11 * hash + this.y;</span>
<span class="nc" id="L353">        hash = 11 * hash + Objects.hashCode(this.arvo);</span>
<span class="nc" id="L354">        hash = 11 * hash + Objects.hashCode(this.vari);</span>
<span class="nc" id="L355">        return hash;</span>
    }

    @Override
    public boolean equals(Object obj) {
<span class="nc bnc" id="L360" title="All 2 branches missed.">        if (this == obj) {</span>
<span class="nc" id="L361">            return true;</span>
        }
<span class="nc bnc" id="L363" title="All 2 branches missed.">        if (obj == null) {</span>
<span class="nc" id="L364">            return false;</span>
        }
<span class="nc bnc" id="L366" title="All 2 branches missed.">        if (getClass() != obj.getClass()) {</span>
<span class="nc" id="L367">            return false;</span>
        }
<span class="nc" id="L369">        final Nappula other = (Nappula) obj;</span>
<span class="nc bnc" id="L370" title="All 2 branches missed.">        if (this.x != other.x) {</span>
<span class="nc" id="L371">            return false;</span>
        }
<span class="nc bnc" id="L373" title="All 2 branches missed.">        if (this.y != other.y) {</span>
<span class="nc" id="L374">            return false;</span>
        }
<span class="nc bnc" id="L376" title="All 2 branches missed.">        if (this.arvo != other.arvo) {</span>
<span class="nc" id="L377">            return false;</span>
        }
<span class="nc bnc" id="L379" title="All 2 branches missed.">        if (this.vari != other.vari) {</span>
<span class="nc" id="L380">            return false;</span>
        }
<span class="nc" id="L382">        return true;</span>
    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.3.201901230119</span></div></body></html>